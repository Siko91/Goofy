Здравейте
Пушнах работещата версия на програмата
такава че да работи с плъгини и да е по-подредена
не съм изтрил вашата  версия, а просто я преместих в папка "старата версия"
ще ме прощавате че давам зор да се преправя изцяло тая версия, ама... спагети код
ето няколко важни неща:

- Когато пишете плъгините си, ги пишете подобно на тези които съм дал като мостри (двата тестови плъгина). В самостоятелна папка. Там ако искате разделяйте кода на файлове - ако искате в един файл.

- в html-a има специално място за линкване на скриптове за плъгини - само там слагайте връзките, за да няма счупвания по кода.

- Избягвайте глобалните променливи в кода си. Да са колкото може по-малко. Примерно ако инициализирате контекста, правете го локално, в метода си.

- Всички глобални променливи и методи които ще ви трябват могат да бъдат намерени в "global.js". Прочетете го. Не го променяйте! Промените ще счупят кода на колегите.

- Енджина работи - използвайте го. (използвайки глобалните неща коректно ще ползвате енджина). Не го променяте! Дори и да не го счупите за вашия код, може да се счупи за кода на другарчето. Ако има някаква несъвместимост между плъгина и енджина, значи проблема е в плъгина.

- Вмомента има проблем с лейърите. Скоро ще го оправя. Възможно е за оправянето му да въведа променлива "currentContext". Предполагам че това няма да счупи нищо (няма да ви прецака кода, ако сами си правите контекстове) но все пак имайте предвид че може да се наложи навсякъде да премахнете исканията за контекст и да използвате "currentContext".

